# glass_feedback

- 사용자 피드백을 기반으로 안경 추천을 관리하기 위해 복잡한 시스템을 개발 중인 것 같습니다. 시스템이 어떻게 작동해야 하는지 요약하고 개선을 위한 제안을 제시합니다:

 - 워크플로 개요
사용자 피드백 컬렉션:
두 가지 방법을 사용하여 사용자 피드백을 수집합니다:

GPT 기반 피드백 분석: GPT API(gpt_feedback_input)를 사용하여 사용자 피드백을 분석하고 가격, 색상, 크기, 재료 등의 속성으로 분류합니다.
수동 피드백 입력: GPT가 실패하면 시스템은 수동 피드백 입력(manual_feedback_input)으로 전환합니다.
유리 데이터 가져오기:
피드백을 수집한 후 API 호출을 사용하여 사용자의 안경 데이터를 가져와_glasses를 얻습니다.

참조 항목 계산:
피드백 유형과 값을 기반으로 시스템은 기준 항목(예: 평균 가격 또는 크기)을 계산하여 안경 데이터를 필터링합니다.

필터링:
필터링 프로세스는 사용자 피드백을 기반으로 다양한 필터(가격, 브랜드, 모양 등)를 적용합니다. 여기에는 다음이 포함됩니다:

가격: 기준보다 저렴하거나 비싼 안경을 필터링합니다.
브랜드: 저가형 또는 고급 브랜드를 기반으로 필터링합니다.
모양: 모양 범주(사각형, 원형 등)를 기준으로 필터링합니다.
재료: 재료 유형(금속, 플라스틱 등)에 따라 필터합니다.
색상: HSV 값을 기준으로 필터링합니다.
크기 및 무게: 크기 또는 무게 선호도에 따라 필터링합니다.
크로마DB 통합:
안경 아이템을 저장하고 검색하는 데 ChromaDB를 사용하고 있습니다. 이러한 아이템의 임베딩은 피드백과 참조 아이템을 기반으로 쿼리됩니다.

 - 제안된 개선 사항
숫자가 아닌 피드백 처리:
간단한 수치 비교(예: 모양 또는 색상)가 없는 피드백 유형의 경우 피드백 값을 필터링에 적합한 형식으로 변환해야 합니다. 예를 들어 피드백이 "원형"인 경우 특정 안경 품목에 매핑되는 모양 범주로 변환합니다.

오류 처리:
API 호출에 실패한 경우(예: get_glasses가 오류를 반환하는 경우) 오류 처리를 개선합니다. 여기에는 데이터가 반환되지 않을 때 재시도 논리 또는 기본값이 포함될 수 있습니다.

필터링 로직 최적화:
필터링 로직은 이미 상당히 상세하지만 몇 가지 개선해야 할 부분이 있습니다:

색상 필터링: 모든 안경 품목의 색상이 HSV 비교를 위해 호환되는 형식인지 확인합니다. 또한 색상 필터(예: 파란색, 녹색)를 추가할 수도 있습니다.
브랜드 가격 비교: get_brand_price 함수는 가격에 따라 필터링하는 좋은 접근 방식입니다. 지역별 가격 변동을 고려하여 유연성을 더하는 것을 고려할 수 있습니다.
피드백 유형 개선:
현재 가격, 브랜드, 색상 등과 같은 피드백 유형은 필터에 직접 매핑됩니다. 각 피드백 유형이 강력하게 검증되고 처리되는지 확인합니다. 예를 들어:

가격: 참조 항목과 비교하여 피드백 값(더 저렴하거나 비쌉니다)이 올바르게 해석되는지 확인합니다.
크기: 크기를 사용할 수 없는 경우와 같이 에지 케이스를 처리하기 위해 로직을 추가합니다.
로그 및 디버깅 사용:
플라스크 앱은 디버깅에 유용한 중요한 정보를 기록하고 있습니다. 워크플로의 주요 지점에 더 자세한 로그를 포함시켜 데이터 흐름을 추적하고 잠재적인 문제를 파악하는 데 도움이 되도록 하세요.
크기: 크기를 사용할 수 없는 경우와 같이 에지 케이스를 처리하기 위해 로직을 추가합니다.
